document.addEventListener("DOMContentLoaded",function(){"use strict";("ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0)&&document.body.classList.add("touch");var e,t,n,a,i,o,l=100,c=5e3,r=50,d=2;function s(){e=Math.max(l,e-r),f()}function u(){e=Math.min(c,e+r),f()}function m(e,t,n=!1){var a,i=n?Math.ceil(e):Math.round(e);return String(i).length>t&&(a=Math.pow(10,String(i).length-t),i=n?Math.ceil(i/a)*a:Math.round(i/a)*a),i}function f(){var i,o,l,c,r,s,u,f,h,v=e*recipeBaseRatio;for(i in a.textContent=e,ingredients)ingredients[i].qty=v*ingredients[i].ratio/100;for(i=0;i<t.length;i++)c=t[i].dataset.qty.split(".")[0],h=!1,l=t[i].dataset.mult?+t[i].dataset.mult:1,ingredients[c]&&(o=ingredients[c].qty),"volume"===c&&(h=!0,o="base"===(r=t[i].dataset.qty.split(".")[1])?e:"ml"===ingredients[r].units?ingredients[r].qty:ingredients[r].qty/ingredients[r].spec),"containers"===c&&(h=!0,s=+t[i].dataset.qty.split(".")[1],o=e/s),o=m(o*l,t[i].dataset.prec||d,h),t[i].textContent=o;for(i=0;i<n.length;i++)u=n[i].dataset.plural.split(".")[0],f=n[i].dataset.plural.split(".")[1].split("-"),o=m(ingredients[u].qty),n[i].textContent=f[o>1?1:0]}var h,v=5,y=document.querySelector("article"),g=document.querySelectorAll("section"),p=document.querySelectorAll("nav a"),b=document.querySelector("footer"),w=document.getElementById("btn-prev"),q=document.getElementById("btn-next"),k=window.innerHeight;function E(e,t){clearInterval(h),h=setTimeout(function(){clearInterval(h),h=null},1e3),e.scrollIntoView({behavior:"smooth"}),window.history.replaceState(null,null,t)}function L(e){S(e),E(document.getElementById(p[e-1].text),"#"+p[e-1].text)}function S(e){for(var t=document.querySelectorAll("nav li"),n=0;n<t.length;n++)t[n].classList.remove("selected");t[e-1].classList.add("selected"),e>1?w.classList.remove("hidden"):w.classList.add("hidden")}function I(){var e,t,n=B(1);n.label?(S(n.num),e=document.getElementById(n.label),t="#"+n.label):(e=b,t=" "),E(e,t)}function x(){var e=B(-1);e.label&&(S(e.num),E(document.getElementById(e.label),"#"+e.label))}function B(e=0){for(var t=0;t<v&&document.documentElement.scrollTop>g[t].offsetTop-k/2;)t++;return document.documentElement.scrollTop+k-100>b.offsetTop&&(t=v+1),{num:t+e,label:t+e>0&&t+e<=v?p[t-1+e].text:""}}function M(){var e=B(),t=location.hash;e.num<=v?(y.className="section"+e.num,h||t=="#"+e.label||(window.history.replaceState(null,null,"#"+e.label),S(e.num)),q.classList.remove("hidden")):(h||""==t||window.history.replaceState(null,null," "),q.classList.add("hidden"))}function T(){k=window.innerHeight,M()}g.length&&(e=recipeBase.qty,"undefined"!=typeof recipeRange&&(l=recipeRange[0],c=recipeRange[1],r=recipeRange[2]),"undefined"!=typeof recipePrecision&&(d=recipePrecision),t=document.querySelectorAll("[data-qty]"),n=document.querySelectorAll("[data-plural]"),a=document.getElementById("qtyValue"),i=document.getElementById("qtyRemove"),o=document.getElementById("qtyAdd"),i.addEventListener("click",s),o.addEventListener("click",u),f(),function(){if(window.onresize=T,window.onscroll=M,function(){for(var e=0;e<p.length;e++)p[e].addEventListener("click",function(e){e.preventDefault(),L(+this.parentNode.dataset.num)})}(),S(1),q.addEventListener("click",I),w.addEventListener("click",x),q.classList.remove("hidden"),location.hash){var e=B();y.className="section"+e.num,S(e.num)}}(),document.onkeydown=function(e){switch((e=e||window.event).keyCode){case 37:e.preventDefault(),x();break;case 39:e.preventDefault(),I();break;case 32:case 9:e.preventDefault(),B().num>v?L(1):I();break;case 49:L(1);break;case 50:L(2);break;case 51:L(3);break;case 52:L(4);break;case 53:L(5);break;case 189:s();break;case 187:u();break;case 220:document.location="/"}})});