document.addEventListener("DOMContentLoaded",function(){"use strict";("ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0)&&document.body.classList.add("touch");var e,t,n,a,i,o,l=100,c=5e3,r=50,d=2;function s(){e=Math.max(l,e-r),y()}function u(){e=Math.min(c,e+r),y()}function m(e,t,n=!1){var a,i=n?Math.ceil(e):Math.round(e);return String(i).length>t&&(a=Math.pow(10,String(i).length-t),i=n?Math.ceil(i/a)*a:Math.round(i/a)*a),i}function y(){var i,o,l,c,r,s,u,y,f,p=e*recipeBaseRatio;for(i in a.textContent=e,ingredients)ingredients[i].qty=p*ingredients[i].ratio/100;for(i=0;i<t.length;i++)c=t[i].dataset.qty.split(".")[0],f=!1,l=t[i].dataset.mult?+t[i].dataset.mult:1,ingredients[c]&&(o=ingredients[c].qty),"volume"===c&&(f=!0,o="base"===(r=t[i].dataset.qty.split(".")[1])?e:"ml"===ingredients[r].units?ingredients[r].qty:ingredients[r].qty/ingredients[r].spec),"containers"===c&&(f=!0,s=+t[i].dataset.qty.split(".")[1],o=e/s),o=m(o*l,t[i].dataset.prec||d,f),t[i].textContent=o;for(i=0;i<n.length;i++)u=n[i].dataset.plural.split(".")[0],y=n[i].dataset.plural.split(".")[1].split("-"),o=m(ingredients[u].qty),n[i].textContent=y[o>1?1:0]}var f,p=5,g=document.querySelector("article"),h=document.querySelectorAll("section"),v=Array.from(h).map(e=>e.id),b=document.querySelector("footer"),w=document.getElementById("btn-prev"),q=document.getElementById("btn-next"),k=window.innerHeight;function E(e,t){clearInterval(f),f=setTimeout(function(){clearInterval(f),f=null},1e3),e.scrollIntoView({behavior:"smooth"}),window.history.replaceState(null,null,t)}function L(e){I(e),E(document.getElementById(v[e-1]),"#"+v[e-1])}function I(e){e>1?w.classList.remove("hidden"):w.classList.add("hidden")}function B(){var e,t,n=S(1);n.label?(I(n.num),e=document.getElementById(n.label),t="#"+n.label):(e=b,t=" "),E(e,t)}function M(){var e=S(-1);e.label&&(I(e.num),E(document.getElementById(e.label),"#"+e.label))}function S(e=0){for(var t=0;t<p&&document.documentElement.scrollTop>h[t].offsetTop-k/2;)t++;return document.documentElement.scrollTop+k-100>b.offsetTop&&(t=p+1),{num:t+e,label:t+e>0&&t+e<=p?v[t-1+e]:""}}function x(){var e=S(),t=location.hash;e.num<=p?(g.className="section"+e.num,f||t=="#"+e.label||(window.history.replaceState(null,null,"#"+e.label),I(e.num)),q.classList.remove("hidden")):(f||""==t||window.history.replaceState(null,null," "),q.classList.add("hidden"))}function T(){k=window.innerHeight,x()}h.length&&(e=recipeBase.qty,"undefined"!=typeof recipeRange&&(l=recipeRange[0],c=recipeRange[1],r=recipeRange[2]),"undefined"!=typeof recipePrecision&&(d=recipePrecision),t=document.querySelectorAll("[data-qty]"),n=document.querySelectorAll("[data-plural]"),a=document.getElementById("qtyValue"),i=document.getElementById("qtyRemove"),o=document.getElementById("qtyAdd"),i.addEventListener("click",s),o.addEventListener("click",u),y(),function(){if(window.onresize=T,window.onscroll=x,I(1),q.addEventListener("click",B),w.addEventListener("click",M),q.classList.remove("hidden"),location.hash){var e=S();g.className="section"+e.num,I(e.num)}}(),document.onkeydown=function(e){switch((e=e||window.event).keyCode){case 8:document.location="/";break;case 37:e.preventDefault(),M();break;case 39:e.preventDefault(),B();break;case 32:case 9:e.preventDefault(),S().num>p?L(1):B();break;case 49:L(1);break;case 50:L(2);break;case 51:L(3);break;case 52:L(4);break;case 53:L(5);break;case 189:s();break;case 187:u()}})});