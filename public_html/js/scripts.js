document.addEventListener("DOMContentLoaded",function(){"use strict";var e=!1;("ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0)&&(document.body.classList.add("touch"),e=!0);var t=document.querySelector(".sidebar");function n(){window.addEventListener("click",o),t.classList.add("open")}function o(){window.removeEventListener("click",o),t.classList.remove("open")}var a,i,l,r,c,d,s=100,u=5e3,m=50,f=2;function p(){a=Math.max(s,a-m),v()}function h(){a=Math.min(u,a+m),v()}function y(e,t,n=!1){var o,a=n?Math.ceil(e):Math.round(e);return String(a).length>t&&(o=Math.pow(10,String(a).length-t),a=n?Math.ceil(a/o)*o:Math.round(a/o)*o),a}function v(){var e,t,n,o,m,p,h,v,g,b=a*recipeBaseRatio;for(e in d.textContent=a,Array.from(i).forEach(e=>{e.disabled=a===u}),Array.from(l).forEach(e=>{e.disabled=a===s}),ingredients)ingredients[e].qty=b*ingredients[e].ratio/100;for(e=0;e<r.length;e++)o=r[e].dataset.qty.split(".")[0],g=!1,n=r[e].dataset.mult?+r[e].dataset.mult:1,ingredients[o]&&(t=ingredients[o].qty),"volume"===o&&(g=!0,t="base"===(m=r[e].dataset.qty.split(".")[1])?a:"ml"===ingredients[m].units?ingredients[m].qty:ingredients[m].qty/ingredients[m].spec),"containers"===o&&(g=!0,p=+r[e].dataset.qty.split(".")[1],t=a/p),t=y(t*n,r[e].dataset.prec||f,g),r[e].textContent=t;for(e=0;e<c.length;e++)h=c[e].dataset.plural.split(".")[0],v=c[e].dataset.plural.split(".")[1].split("-"),t=y(ingredients[h].qty),c[e].textContent=v[t>1?1:0]}var g,b,w,E=5,q=document.querySelector("article"),k=document.querySelectorAll("section"),L=document.querySelectorAll(".navdots li"),S=Array.from(k).map(e=>e.id),A=document.getElementById("btn-prev"),B=document.getElementById("btn-next");function M(e,t){clearInterval(w),w=setTimeout(function(){clearInterval(w),w=null},1e3),e.scrollIntoView({behavior:"smooth"}),window.history.replaceState(null,null,"#principi"!==t?t:" ")}function I(e){x(e),M(document.getElementById(S[e-1]),"#"+S[e-1])}function x(e){A.disabled=!(e>1),Array.from(L).forEach(e=>{e.classList.remove("selected")}),L[e-1].classList.add("selected")}function C(){var e=T(1);e.label&&(x(e.num),M(document.getElementById(e.label),"#"+e.label))}function R(){var e=T(-1);e.label&&(x(e.num),M(document.getElementById(e.label),"#"+e.label))}function T(e=0){for(var t=0;t<E&&g.scrollTop>k[t].offsetTop-b/2;)t++;return{num:t+e,label:t+e>0&&t+e<=E?S[t-1+e]:""}}function P(){var e=T(),t=location.hash;if(e.num<=E){if(q.className="section"+e.num,!w&&t!="#"+e.label){var n="#"+e.label;window.history.replaceState(null,null,"#principi"!==n?n:" "),x(e.num)}B.disabled=e.num>=E}else w||""==t||window.history.replaceState(null,null," "),B.disabled=!0}function D(){g&&(g.onscroll=null),window.onscroll=null,document.querySelector("nav").offsetWidth<=64?(g=document.querySelector(".main"),b=g.offsetHeight,g.onscroll=P):(g=document.documentElement,b=window.innerHeight,window.onscroll=P),P()}function H(){if(D(),window.onresize=D,B.addEventListener("click",C),A.addEventListener("click",R),B.disabled=!1,location.hash){var e=T();q.className="section"+e.num,x(e.num)}else x(1)}function N(){let e=document.createElement("div");e.classList.add("tooltip"),e.innerHTML=this.dataset.tooltip,document.body.appendChild(e);let t=this.getBoundingClientRect(),n=e.getBoundingClientRect(),o=t.top+(t.height-n.height)/2,a=t.left-n.width-2;a<0&&(a=t.right+2),e.style.top=o+"px",e.style.left=a+"px"}function O(){Array.from(document.querySelectorAll(".tooltip")).forEach(e=>{document.body.removeChild(e)})}document.getElementById("mainNavOpen").addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),n()}),t.addEventListener("click",function(e){e.stopPropagation()}),e||Array.from(document.querySelectorAll("[data-tooltip]")).forEach(e=>{e.addEventListener("mouseenter",N),e.addEventListener("mouseleave",O)}),k.length&&(a=recipeBase.qty,"undefined"!=typeof recipeRange&&(s=recipeRange[0],u=recipeRange[1],m=recipeRange[2]),"undefined"!=typeof recipePrecision&&(f=recipePrecision),r=document.querySelectorAll("[data-qty]"),c=document.querySelectorAll("[data-plural]"),d=document.getElementById("qtyValue"),i=document.querySelectorAll(".btn-icon-plus"),l=document.querySelectorAll(".btn-icon-minus"),Array.from(i).forEach(e=>{e.addEventListener("click",h)}),Array.from(l).forEach(e=>{e.addEventListener("click",p)}),v(),e||(document.onkeydown=function(e){switch((e=e||window.event).keyCode){case 8:n();break;case 37:case 38:e.preventDefault(),R();break;case 39:case 40:e.preventDefault(),C();break;case 32:case 9:e.preventDefault(),T().num>E-1?I(1):C();break;case 49:I(1);break;case 50:I(2);break;case 51:I(3);break;case 52:I(4);break;case 53:I(5);break;case 189:p();break;case 187:h()}}),location.hash?(location=location.hash,setTimeout(function(){H()},1e3)):H())});